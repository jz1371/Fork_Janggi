describe("In Janggi ", function()
{
    var janggiLogic;

    beforeEach(module("myApp.gameLogic"));

    beforeEach(inject(function (gameLogic)
    {
        janggiLogic = gameLogic;
    }));

    function expectMoveOk(turnIndexBeforeMove, stateBeforeMove, move)
    {
        expect(janggiLogic.isMoveOk({ turnIndexBeforeMove: turnIndexBeforeMove, stateBeforeMove: stateBeforeMove, move: move })).toBe(true);
    }

    function expectIllegalMove(turnIndexBeforeMove, stateBeforeMove, move)
    {
        expect(janggiLogic.isMoveOk({ turnIndexBeforeMove: turnIndexBeforeMove, stateBeforeMove: stateBeforeMove, move: move })).toBe(false);
    }
    
    
    // ==========================================================================================================
    // Red general and red guards
    // ==========================================================================================================
    it("placing RG1 in (0, 4) from initial state is legal", function () {
        expectMoveOk(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RG1 in (0, 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {board: 
                                          [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RU1', 'RG1', 'RU2', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RG1', '', '', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RU1', '', 'RU2', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 0, col: 3 } } }
            ]);
    });

    it("placing RG1 in (1, 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                             [['RR1', 'RH1', 'RE1', '', '', 'RG1', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', 'RU1', '', 'RU2', '', '', ''],
                                             ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                             ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                             ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RU1', 'RG1', 'RU2', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RG1 in (1, 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                             [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', 'RU1', '', 'RU2', '', '', ''],
                                             ['', 'RC1', '', '', '', 'RG1', '', 'RC2', ''],
                                             ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                             ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RU1', 'RG1', 'RU2', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RG1 in (1, 3) from initial state is legal", function () {
        expectMoveOk(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RG1', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 1, col: 3 } } }
            ]);
    });
    
    it("placing RG1 in (4, 4) from initial state is legal", function () {
        expectIllegalMove(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 4, col: 4 } } }
            ]);
    });
    
    it("placing RG1 in (1, 3) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                             [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', 'RC1', '', 'RU1', '', 'RU2', '', 'RC2', ''],
                                             ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                             ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', 'RG1', '', '', '', '', ''],
                                          ['', 'RC1', '', 'RU1', '', 'RU2', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 1, col: 3 } } }
            ]);
    });


    // ==========================================================================================================
    // Blue general and blue guards
    // ==========================================================================================================
    it("placing BG1 in (9, 4) down from a legal state is legal", function () {
        expectMoveOk(1,
            { board:
            [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', 'BG1', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 9, col: 4 } } }
            ]);
    });

    it("placing BG1 in (8, 4) up from a legal state is legal", function () {
        expectMoveOk(1,
            { board:
            [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', 'BG1', '', '', '', 'BC2', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 4 } } }
            ]);
    });

    it("placing BG1 in (8, 4) diagonal from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                              ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                              ['', 'BC1', '', '', '', 'BG1', '', 'BC2', ''],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 4 } } }
            ]);
    });

    it("placing BG1 in (9, 4) diagonal from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                              ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                              ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                              ['', '', '', 'BU1', 'BG1', 'BU2', '', '', ''],
                                              ['BR1', 'BH1', 'BE1', '', '', '', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', 'BU1', '', 'BU2', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BG1', '', '', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 9, col: 3 } } }
            ]);
    });

    it("placing BG1 in (9, 5) diagonal from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                              ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['', '', '', '', '', '', '', '', ''],
                                              ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                              ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                              ['', '', '', 'BU1', 'BG1', 'BU2', '', '', ''],
                                              ['BR1', 'BH1', 'BE1', '', '', '', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', 'RG1', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', 'BU1', '', 'BU2', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', '', '', 'BG1', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 9, col: 5 } } }
            ]);
    });

    it("placing BG1 in (6, 5) from a legal state is illegal", function () {
        expectIllegalMove(1,
            {
                board: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                            ['RR1', '', '', 'RG1', 'RG1', 'RG2', '', '', ''],
                            ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                            ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                            ['', '', '', '', '', '', '', '', ''],
                            ['', '', '', '', '', '', '', '', ''],
                            ['BS1', '', 'BS2', '', 'BS3', 'BG1', 'BS4', '', 'BS5'],
                            ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                            ['', '', '', '', 'BG1', '', '', '', ''],
                            ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                      ['RR1', '', '', '', 'RG1', '', '', '', ''],
                                      ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                      ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                      ['', '', '', '', '', '', '', '', ''],
                                      ['', '', '', '', '', '', '', '', ''],
                                      ['BS1', '', 'BS2', '', 'BS3', 'BG1', 'BS4', '', 'BS5'],
                                      ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                      ['', '', '', '', '', '', '', '', ''],
                                      ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 6, col: 5 } } }
            ]);
    });

    it("placing BG1 in (8 , 5) from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', '', 'BG1', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 5 } } }
            ]);
    });

    it("placing BG1 in (8 , 4) from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 4 } } }
            ]);
    });

    it("placing BG1 in (8 , 4) from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BR1', 'BG1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BS2', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 4 } } }
            ]);
    });


    

    // ==========================================================================================================
    // Horses
    // ==========================================================================================================
    it("placing RH1 in (2, 6) down from initial state is legal", function () {
        expectMoveOk(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', '', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', 'RH2', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4',  '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RH2', row: 2, col: 6 } } }
            ]);
    });

    it("placing RH1 in (3, 5) up from a legal state is legal", function () {
        expectMoveOk(0,
            {board:
                                          [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', '', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', 'RH2', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', 'BG1', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', '', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', 'RH2', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', 'BG1', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RH2', row: 3, col: 5 } } }
            ]);
    });

    it("placing RH1 in (6 , 3) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', 'RS2', '', 'RS4', 'RS5', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', 'RS3', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', 'RS2', '', 'RS4', 'RS5', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', 'RH1', '', '', 'RS3', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RH1', row: 6, col: 3 } } }
            ]);
    });
    
    it("placing RH1 in (6 , 3) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', 'RS1', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', 'RS2', '', '', '', 'RC1', '', ''],
                                             ['', '', '', 'RS3', '', 'RS5', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', 'RS1', '', '', '', 'RH1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', 'RS2', '', '', '', 'RC1', '', ''],
                                             ['', '', '', 'RS3', '', 'RS5', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RH1', row: 3, col: 6 } } }
            ]);
    });

    // ==========================================================================================================
    // Elephants
    // ==========================================================================================================
    it("placing RE2 in (0, 0) from initial state is illegal", function () {
        expectIllegalMove(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE2', row: 0, col: 0 } } }
            ]);
    });

    it("placing RE2 in (2, 2) up from a legal state is legal", function () {
        expectMoveOk(0,
            {board:
                                         [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', '', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RE2', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['RR1', 'RH1', 'RE1', 'RU1', '', 'RU2', '', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', 'RE2', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE2', row: 2, col: 2 } } }
            ]);
    });

    it("placing RE1 in (5 , 3) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['RE1', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', 'RE1', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 5, col: 3 } } }
            ]);
    });

    it("placing RE1 in (0 , 6) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', 'RE1'],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', 'RE1', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 0, col: 6 } } }
            ]);
    });

    it("placing RE1 in (4 , 3) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['RE1', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', 'RE1', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 4, col: 3 } } }
            ]);
    });

    it("placing RE1 in (9 , 6) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', 'RE1'],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', 'RE1', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 9, col: 6 } } }
            ]);
    });

    it("placing RE1 in (9 , 6) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', 'RE1', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', 'RE1'],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 6, col: 8 } } }
            ]);
    });

    it("placing RE1 in (9 , 6) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RE1', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', 'RE1'],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RE1', row: 6, col: 8 } } }
            ]);
    });
    


    // ==========================================================================================================
    // Chariots
    // ==========================================================================================================
    it("placing RR1 in (1, 0) from initial state is legal", function () {
        expectMoveOk(0, {},
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['RR1', '', '', '', 'RG1', '', '', '', ''],
                                          ['', 'RC1', '', '', '', '', '', 'RC2', ''],
                                          ['RS1', '', 'RS2', '', 'RS3', '', 'RS4', '', 'RS5'],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BS1', '', 'BS2', '', 'BS3', '', 'BS4', '', 'BS5'],
                                          ['', 'BC1', '', '', '', '', '', 'BC2', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 1, col: 0 } } }
            ]);
    });
    
    it("placing RR1 in (2, 2) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', 'RR1', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', 'RR1', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 4, col: 2 } } }
            ]);
    });
    
    it("placing RR1 in (9, 3) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RR1', 'BG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RR5', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'RR1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 3 } } }
            ]);
    });

    it("placing RR1 in (9, 5) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', 'RR1', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 5 } } }
            ]);
    });

    it("placing RR1 in (8, 4) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'BU1', '', 'RR1', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['', '', '', '', 'RR1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', 'BU1', '', '', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 8, col: 4 } } }
            ]);
    });

    it("placing RR1 in (8, 4) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'RR1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', 'RG1', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'RS5', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', '', '', '', ''],
                                          ['', '', '', '', 'RR1', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 8, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (7, 5) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'RU1', '', 'RU2', 'RE2', 'RH2', 'RR2'],
                                          ['', '', '', '', '', 'RG1', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['', '', '', '', 'BG1', 'RR1', '', '', ''],
                                          ['', '', '', '', '', '', '', '', ''],
                                          ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 5 } } }
            ]);
    });
    
    it("placing RR1 in (2, 5) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 5 } } }
            ]);
    });

    it("placing RR1 in (1, 4) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', 'RR1', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RR1 in (1, 4) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RR1', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 1, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (1, 4) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RR1', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RR1 in (1, 4) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RR1', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RR1', '', 'RG1', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RR1', 'RG1', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RR1', '', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RR1', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RR1', '', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RR1', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RR1', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RR1', '', '', ''],
                                             ['', '', '', '', 'RS4', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RS4', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (0 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS5', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS5', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 0, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', '', '', '', ''],
                                             ['', '', '', '', 'BS4', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', '', '', '', '', ''],
                                             ['', '', '', '', 'BS4', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS4', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS4', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', 'BS4', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', 'BS4', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RG1', '', 'RS4', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'BS3', 'RG1', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'BS3', 'RG1', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RS3', 'RG1', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RS3', 'RG1', 'RS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'BS3', 'RG1', 'BS4', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'BS3', 'RG1', 'BS4', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', 'RR1', 'BS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });

    it("placing RR1 in (2 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', 'RS3', 'RG1', 'RS5', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', 'RS1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RS3', 'RG1', 'RS5', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS1', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', 'RS1', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 2, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RS1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RS1', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });
    
    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', 'BR1', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', 'BR1', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BR1', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', 'RS3', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (7 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', 'RR1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS1', 'BG1', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS1', 'BG1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 7, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', 'BS1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', 'BS1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', 'RR1', '', 'RS4', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'RR1', 'RS4', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    it("placing RR1 in (9 , 4) from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RC1', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 9, col: 4 } } }
            ]);
    });

    
    // ==========================================================================================================
    // Soldiers
    // ==========================================================================================================
    it("placing RS1 in (8, 4) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', 'RS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RS1', row: 8, col: 4 } } }
            ]);
    });

    it("placing RS1 in (8, 4) down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', 'RS1', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RS1', row: 9, col: 4 } } }
            ]);
    });
    
    it("placing BS1 in (1, 5) up from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BS1', row: 1, col: 4 } } }
            ]);
    });

    it("placing BS1 in (0, 3) up from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', 'BS1', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BS1', row: 0, col: 3 } } }
            ]);
    });

    it("placing BS1 in (1, 4) up from a legal state is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'BS1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BS1', row: 1, col: 4 } } }
            ]);
    });
    
    it("trying to move a red soldier up is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', 'RS5', 'RS1', ''],
                                             ['', '', '', '', 'RH1', '', 'RS3', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RS2', 'RS5', 'RS1', ''],
                                             ['', '', '', '', 'RH1', '', 'RS3', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RS5', row: 2, col: 6 } } }
            ]);
    });

    it("trying to move a red soldier up is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', 'RS1', 'RS2', 'RS3', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', 'RS5', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RS1', 'RS2', 'RS3', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RS5', row: 7, col: 4 } } }
            ]);
    });

    it("trying to move a blue soldier down is illegal", function () {
        expectIllegalMove(1,
            {
                board:
                                            [['', '', '', 'BS3', 'BS2', 'BS1', '', '', ''],
                                             ['', '', '', 'BS4', 'BS5', 'BC1', '', '', ''],
                                             ['', '', '', '', '', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', 'RS1', 'RS2', 'RS3', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 0 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'BS3', 'BS2', 'BS1', '', '', ''],
                                             ['', '', '', 'BS4', '', 'BC1', '', '', ''],
                                             ['', '', '', '', 'BS5', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS5', '', '', '', ''],
                                             ['', '', '', 'RS1', 'RS2', 'RS3', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BS5', row: 1, col: 4 } } }
            ]);
    });



    // ==========================================================================================================
    // Cannons
    // ==========================================================================================================
    it("placing RC1 in (1, 4) up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', 'BS5', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', 'BS1', 'RC1', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', 'BS5', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RC1', '', '', '', ''],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 1, col: 4 } } }
            ]);
    });

    it("placing RC1 in (1, 4) diagonal up from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', 'RC1', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 0, col: 5 } } }
            ]);
    });

    it("placing RC1 in (2, 5) diagonal down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', 'RC1', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', ''],
                                             ['', '', '', '', 'RS1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 2, col: 5 } } }
            ]);
    });

    it("placing RC1 in (9, 5) diagonal down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'RC1', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 9, col: 5 } } }
            ]);
    });

    it("placing RC1 in (9, 3) diagonal down from a legal state is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', 'RC1', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 9, col: 3 } } }
            ]);
    });

    it("placing RC1 in (0 , 3) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', 'RC1', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 0, col: 3 } } }
            ]);
    });

    it("placing RC1 in (0 , 5) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', 'RC1', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 0, col: 5 } } }
            ]);
    });

    it("placing RC1 in (2 , 5) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', 'RC1', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 2, col: 5 } } }
            ]);
    });

    it("placing RC1 in (2 , 3) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', 'RC1', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RR2', 'BG1', 'RS2', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RR1', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 2, col: 3 } } }
            ]);
    });

    it("placing RC1 in (9 , 5) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RC1', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 9, col: 5 } } }
            ]);
    });

    it("placing RC1 in (9 , 3) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', 'RC1', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 9, col: 3 } } }
            ]);
    });

    it("placing RC1 in (7 , 5) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', 'RC1', 'BG1', '', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 7, col: 5 } } }
            ]);
    });

    it("placing RC1 in (7 , 3) by jumping over a cannon is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', 'RC1', '', '', '']]
            },
            [
            { setTurn: { turnIndex: 1 } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', 'RS5', '', ''],
                                             ['', '', '', '', 'RH1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', 'RC1', '', '', '', '', ''],
                                             ['', '', '', '', 'RC2', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RC1', row: 7, col: 3 } } }
            ]);
    });

    

    // ==========================================================================================================
    // Various conditions
    // ==========================================================================================================

    it("red side wins when blue general is captured is legal", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', 'RR1', '', 'BG1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { endMatch: { endMatchScores: [1, 0] } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', '', '', 'RR1', '', '', '', ''],
                                             ['BR1', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RR1', row: 8, col: 4 } } }
            ]);
    });

    it("blue side wins when red general is captured is legal", function () {
        expectMoveOk(1,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['BR1', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', 'RR1', '', 'BG1', '', '', '', ''],
                                             ['', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { endMatch: { endMatchScores: [0, 1] } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'BR1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', 'RR1', '', 'BG1', '', '', '', ''],
                                             ['', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BR1', row: 1, col: 4 } } }
            ]);
    });

    it("using a piece not on the board is illegal", function () {
        expectIllegalMove(1,
            {
                board:
                                            [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['BR1', '', '', '', 'RG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', 'RR1', '', 'BG1', '', '', '', ''],
                                             ['', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
            },
            [
            { endMatch: { endMatchScores: [0, 1] } },
            {
                set: {
                    key: 'board', value: [['', 'RH1', 'RE1', '', '', '', 'RE2', 'RH2', 'RR2'],
                                             ['', '', '', '', 'BR1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BS1', '', 'BS3', '', '', ''],
                                             ['', '', '', '', 'BS2', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', 'RC1', '', '', ''],
                                             ['', '', 'RR1', '', 'BG1', '', '', '', ''],
                                             ['', 'BH1', 'BE1', '', '', 'BU2', 'BE2', 'BH2', 'BR2']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BR3', row: 1, col: 4 } } }
            ]);
    });
    
    it("ends in a draw if only generals, guards, and cannons that cannot move are left", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', '', 'RG1', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', '']]
            },
            [
            { endMatch: { endMatchScores: [0, 0] } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', '', '', 'RG1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'BG1', '', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RG1', row: 1, col: 5 } } }
            ]);
    });
    
    it("ends in a draw if the generals are facing each other unobstructed and the second player does not break the situation", function () {
        expectMoveOk(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', '', 'RG1', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { endMatch: { endMatchScores: [0, 0] } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', 'RU2', '', '', '', ''],
                                             ['', '', '', '', 'RG1', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RU2', row: 0, col: 4 } } }
            ]);
    });
    
    it("moving an opponent's piece is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { endMatch: { endMatchScores: [0, 0] } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'BG1', row: 8, col: 4 } } }
            ]);
    });

    it("trying to cheat is illegal", function () {
        expectIllegalMove(0,
            {
                board:
                                            [['', '', '', '', '', 'RU2', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
            },
            [
            { endMatch: { endMatchScores: [0, 0] } },
            {
                set: {
                    key: 'board', value: [['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', 'RG1', '', 'BS1', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', 'RU2', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', 'RC1', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', 'BC2', '', '', '', '', '', '', ''],
                                             ['', '', '', '', '', '', '', '', ''],
                                             ['', '', '', '', 'BG1', '', '', '', '']]
                }
            },
            { set: { key: 'delta', value: { piece: 'RU2', row: 0, col: 4 } } }
            ]);
    });
  

    // ==========================================================================================================
    // Game example and riddle
    // ==========================================================================================================
    
    function expectLegalHistoryThatEndsTheGame(history)
    {
        for (var i = 0; i < history.length; i++)
        {
            expectMoveOk(history[i].turnIndexBeforeMove, history[i].stateBeforeMove, history[i].move);
        }
        expect(history[history.length - 1].move[0].endMatch).toBeDefined();
    }

    function expectLegalHistory(history)
    {
        for (var i = 0; i < history.length; i++)
        {
            expectMoveOk(history[i].turnIndexBeforeMove, history[i].stateBeforeMove, history[i].move);
        }
        expect(history[history.length - 1].move[1].set.value).toBeDefined();
    }

    it("getRiddles returns a legal history and the last move ends the game", function () {
        var riddles = janggiLogic.getRiddles();
        expect(riddles.length).toBe(1);
        for(var i = 0; i < riddles.length; i++)
        {
            expectLegalHistoryThatEndsTheGame(riddles[i]);
        }
    });
    
    it("getExampleGame returns a legal history", function () {
        var exampleGame = janggiLogic.getExampleGame();
        expect(exampleGame.length).toBe(7);
        expectLegalHistory(exampleGame);
    });
    
    
});